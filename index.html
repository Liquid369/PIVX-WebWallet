<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<style>
body {font-family: Arial;}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>
</head>
<body>

<h2>Doge Cash Web Wallet</h2>
<p>Click on the buttons to start </p>

<div class="tab">
  <button class="tablinks" onclick="openTab(event, 'keypair')">keypair</button>
  <button class="tablinks" onclick="openTab(event, 'Transaction')">Create Transaction</button>
</div>

<div id="keypair" class="tabcontent">
  <h3>Generate Dogec Key Pair</h3>
  <button onclick="generateWallet()">Generate New wallet</button>
  <br>
  Private:<div id='PrivateTxt'></div>
  <br>
  <div id="PrivateQR"></div>
  <br>
  Public:<div id='PublicTxt'></div>
  <br>
  <div id="PublicQR"></div>
</div>

<div id="Transaction" class="tabcontent">
  <h2>One Input and Two Outputs, locktime is set to 0, sequence is set to max.
    SIGHASH_ALL option is chosen for signing raw Transaction.</h2>
    <h2>Inputs</h2>
    <label>Trx Hash</label>
    <input type="text" id="prevTrxHash">
    <label>Index</label>
    <input type="text" id="index">
    <label>Script</label>
    <input type="text" id="script">

    <h2>Outputs</h2>
    <label>Address</label>
    <input type="text" id="address1">
    <label>Amount</label>
    <input type="text" id="value1" onchange='figureChange()'>
    <br/>
    <label>Address</label>
    <input type="text" id="address2">
    <label>Amount</label>
    <input type="text" id="value2" onchange='figureChange()'>
    <h2>WIF Key</h2>
    <label>key</label>
    <input type="text" id="wif">
    <br/><br/>
    <div id='TransactionData'></div>
    <button onclick="createRawTransaction()">Create Raw Signed Transction</button>
    <br/><br/><br/>
    <h2>Signed Raw Transaction</h2>
    <textarea rows="15" cols="70" id="rawTrx"></textarea>
</div>
<script type="text/javascript" src="scripts/libs/crypto-min.js"></script>
 <script type="text/javascript" src="scripts/libs/crypto-sha256.js"></script>
 <script type="text/javascript" src="scripts/libs/crypto-sha256-hmac.js"></script>
 <script type="text/javascript" src="scripts/libs/ripemd160.js"></script>
 <script type="text/javascript" src="scripts/libs/jsbn.js"></script>
 <script type="text/javascript" src="scripts/libs/ellipticcurve.js"></script>
 <script type="text/javascript" src="scripts/libs/bitTrx.js"></script>
 <script type="text/javascript" src="scripts/libs/script.js"></script>

<script type="text/javascript" src="scripts/libs/qrcode.js"></script>
<script type="text/javascript" src="scripts/libs/sha256.js"></script>
<script type="text/javascript" src="scripts/wallet.js"></script>
<script>
function figureChange(){
  var val1 = parseInt(document.getElementById("value1").value);
  var val2 = parseInt(document.getElementById("value2").value);
  if(val1 && val2){
    var total = val1 + val2;
    document.getElementById("TransactionData").innerHTML = `Total in Transaction: ${total}`;
  }
}
function createRawTransaction() {
  var trx = bitjs.transaction();
  var txid = document.getElementById("prevTrxHash").value;
  var index = document.getElementById("index").value;
  var script = document.getElementById("script").value;
  trx.addinput(txid,index,script);
  var address = document.getElementById("address1").value;
  var value = document.getElementById("value1").value;
  trx.addoutput(address,value);
  var address = document.getElementById("address2").value;
  var value = document.getElementById("value2").value;
  trx.addoutput(address,value);
  var wif = document.getElementById("wif").value;
  var textArea = document.getElementById("rawTrx");
  textArea.value = trx.sign(wif,1); //SIGHASH_ALL DEFAULT 1
}
function openTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>
</body>

</html>
